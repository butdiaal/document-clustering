"""
Ручная разметка документов
"""

reference_labels = {
    "Договор_вклада_депозита_Золотое_время_doc.txt": {
        1: [
            "предмет договора",
            "стороны договора",
            "права банка",
            "общие условия",
            "п. 1.1-1.3",
        ],
        2: [
            "сумма вклада",
            "пополнение вклада",
            "возврат средств",
            "сроки вклада",
            "п. 2.1-2.4",
        ],
        3: [
            "проценты по вкладу",
            "начисление процентов",
            "выплата процентов",
            "процентные ставки",
            "п. 3.1-3.3",
        ],
        4: [
            "порядок расчетов",
            "операции по счету",
            "безналичные переводы",
            "сроки операций",
            "п. 4.1-4.6",
        ],
        5: [
            "ответственность банка",
            "неустойки",
            "гарантии возврата",
            "сохранность вкладов",
            "п. 5.1-5.3",
        ],
        7: [
            "заключительные положения",
            "реквизиты сторон",
            "порядок изменений",
            "расторжение договора",
            "п. 7.1-7.7",
        ],
    },
    "Договор_вклада_депозита_Выгодный_doc.txt": {
        1: [
            "предмет договора",
            "стороны договора",
            "права банка",
            "общие условия",
            "п. 1.1-1.3",
        ],
        2: [
            "условия вклада",
            "сроки вклада",
            "процентные ставки",
            "сумма вклада",
            "п. 2.1-2.9",
        ],
        3: [
            "начисление процентов",
            "выплата процентов",
            "капитализация процентов",
            "п. 2.5-2.6",
        ],
        8: [
            "пополнение вклада",
            "досрочный возврат",
            "частичное востребование",
            "изменение условий",
            "п. 3.1-3.7",
        ],
        5: ["ответственность банка", "неустойки", "сохранность вкладов", "п. 4.1-4.3"],
        7: [
            "заключительные положения",
            "реквизиты",
            "порядок расторжения",
            "п. 5.1-5.7",
        ],
    },
    "Договор_благотворительного_счета_doc.txt": {
        1: [
            "предмет договора",
            "стороны договора",
            "права банка",
            "общие условия",
            "СТАТЬЯ 1",
        ],
        6: [
            "обязательства банка",
            "открытие счета",
            "обслуживание клиента",
            "банковская тайна",
            "обязательства клиента",
            "предоставление документов",
            "уведомление об изменениях",
            "СТАТЬЯ 2",
            "СТАТЬЯ 3",
        ],
        4: [
            "операции по счету",
            "пополнение счета",
            "снятие средств",
            "безналичные переводы",
            "СТАТЬЯ 4",
        ],
        2: [
            "финансовые отношения",
            "процентные ставки",
            "начисление процентов",
            "выплата процентов",
            "СТАТЬЯ 5",
        ],
        5: ["ответственность сторон", "неустойки", "гарантии", "СТАТЬЯ 7"],
    },
    "Договор_вклада_депозита_Зручны_дэпазит_doc.txt": {
        1: [
            "предмет договора",
            "стороны договора",
            "права банка",
            "общие условия",
            "п. 1.1-1.3",
        ],
        2: [
            "сумма вклада",
            "пополнение вклада",
            "возврат средств",
            "сроки вклада",
            "п. 2.1-2.4",
        ],
        3: [
            "проценты по вкладу",
            "начисление процентов",
            "выплата процентов",
            "ставки рефинансирования",
            "п. 3.1-3.3",
        ],
        4: [
            "порядок расчетов",
            "операции по счету",
            "сроки проведения операций",
            "п. 4.1-4.6",
        ],
        8: [
            "порядок изменений",
            "одностороннее изменение условий",
            "уведомления",
            "п. 3.1-3.7",
        ],
        5: ["ответственность банка", "неустойки", "сохранность вкладов", "п. 5.1-5.3"],
        7: [
            "заключительные положения",
            "реквизиты сторон",
            "порядок расторжения",
            "п. 7.1-7.7",
        ],
    },
}

theme_names = {
    0: "ПРЕДМЕТ ДОГОВОРА",
    1: "УСЛОВИЯ ВКЛАДА/СЧЕТА",
    2: "ПРОЦЕНТЫ И ФИНАНСЫ",
    3: "ОПЕРАЦИИ И РАСЧЕТЫ",
    4: "ОТВЕТСТВЕННОСТЬ",
    5: "ОБЯЗАТЕЛЬСТВА СТОРОН",
    6: "ЗАКЛЮЧИТЕЛЬНЫЕ ПОЛОЖЕНИЯ",
    7: "ИЗМЕНЕНИЯ И РАСТОРЖЕНИЕ",
}


def get_reference_mapping():
    """Создает маппинг для сравнения с алгоритмической кластеризацией"""
    theme_mapping = {}

    for filename, themes in reference_labels.items():
        for theme_id, keywords in themes.items():
            theme_name = theme_names.get(theme_id, f"ТЕМА_{theme_id}")
            theme_mapping[(filename, theme_id)] = {
                "name": theme_name,
                "keywords": keywords,
                "theme_id": theme_id,
            }

    return theme_mapping


def get_expected_themes_count():
    """Возвращает количество тем"""
    all_themes = set()
    for themes in reference_labels.values():
        all_themes.update(themes.keys())
    return len(all_themes)
